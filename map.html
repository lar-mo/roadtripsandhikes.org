<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <title>Points on a map</title>
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.css' rel='stylesheet' />
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id='map'></div>
    <script>
    // The value for 'accessToken' begins with 'pk...'
    mapboxgl.accessToken = 'pk.eyJ1IjoibGFybW8iLCJhIjoiY2w2ZmI5N3c2MnpkbzNibjNvMzQyOHRidCJ9.waCz-RqCpy6CN4OmNPWlSA';
    const map = new mapboxgl.Map({
      container: 'map',
      // Replace YOUR_STYLE_URL with your style URL.
      style: 'mapbox://styles/mapbox/cjaudgl840gn32rnrepcb9b9g',
      center: [-96, 40],
      // center: [-121.572972, 46.1732925],
      zoom: 3.5
    });

    map.on('load', () => {
    // Add an image to use as a custom marker
    map.loadImage(
        'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',
        (error, image) => {
            if (error) throw error;
            map.addImage('custom-marker', image);
            // Add a GeoJSON source with 2 points
            map.addSource('points', {
                'type': 'geojson',
                'data': {
                    'type': 'FeatureCollection',
                    'features': [
                    {
                        // feature for Mapbox DC
                        'type': 'Feature',
                        'geometry': {
                            'type': 'Point',
                            'coordinates': [
                                -121.572972, 46.1732925,
                            ]
                    },
                        'properties': {
                            'title': 'Stagman Ridge Trail, Washington, USA'
                        }
                    },
                    {
                          // feature for Mapbox SF
                          'type': 'Feature',
                          'geometry': {
                          'type': 'Point',
                              'coordinates': [-122.414, 37.776]
                          },
                          'properties': {
                              'title': 'Mapbox SF'
                          }
                    }
                  ]
                }
            });

            // Add a symbol layer
            map.addLayer({
                'id': 'points',
                'type': 'symbol',
                'source': 'points',
                'layout': {
                    'icon-image': 'custom-marker',
                    // get the title name from the source's "title" property
                    'text-field': ['get', 'title'],
                    'text-font': [
                        'Open Sans Semibold',
                        'Arial Unicode MS Bold'
                    ],
                    'text-offset': [0, 1.25],
                    'text-anchor': 'top'
                }
            });
        }
    );
});

     map.on('load', () => {
         map.addSource('dem', {
             'type': 'raster-dem',
             'url': 'mapbox://mapbox.mapbox-terrain-dem-v1'
         });
         map.addLayer(
             {
                 'id': 'hillshading',
                 'source': 'dem',
                 'type': 'hillshade'
                 // insert below waterway-river-canal-shadow;
                 // where hillshading sits in the Mapbox Outdoors style
             },
             'waterway-river-canal-shadow'
         );
   });


    // /*
    // Add an event listener that runs
    //   when a user clicks on the map element.
    // */
    // map.on('click', (event) => {
    //   // If the user clicked on one of your markers, get its information.
    //   const features = map.queryRenderedFeatures(event.point, {
    //     layers: ['waterway-river-canal-shadow'] // replace with your layer name
    //   });
    //   if (!features.length) {
    //     return;
    //   }
    //   const feature = features[0];
    //
    //   /*
    //     Create a popup, specify its options
    //     and properties, and add it to the map.
    //   */
    // const popup = new mapboxgl.Popup({ offset: [0, -15] })
    //   .setLngLat(feature.geometry.coordinates)
    //   .setHTML(
    //     `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
    //   )
    //   .addTo(map);
    //
    // });


    </script>
  </body>
</html>
